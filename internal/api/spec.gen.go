// Package api provides primitives to interact with the openapi HTTP API.
//
// Code generated by github.com/oapi-codegen/oapi-codegen/v2 version v2.5.1 DO NOT EDIT.
package api

import (
	"bytes"
	"compress/gzip"
	"encoding/base64"
	"fmt"
	"net/url"
	"path"
	"strings"

	"github.com/getkin/kin-openapi/openapi3"
)

// Base64 encoded, gzipped, json marshaled Swagger object
var swaggerSpec = []string{

	"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",
	"xSYxl2jh9sP1w/8CAAD//9PXLmOcOgAA",
}

// GetSwagger returns the content of the embedded swagger specification file
// or error if failed to decode
func decodeSpec() ([]byte, error) {
	zipped, err := base64.StdEncoding.DecodeString(strings.Join(swaggerSpec, ""))
	if err != nil {
		return nil, fmt.Errorf("error base64 decoding spec: %w", err)
	}
	zr, err := gzip.NewReader(bytes.NewReader(zipped))
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}
	var buf bytes.Buffer
	_, err = buf.ReadFrom(zr)
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}

	return buf.Bytes(), nil
}

var rawSpec = decodeSpecCached()

// a naive cached of a decoded swagger spec
func decodeSpecCached() func() ([]byte, error) {
	data, err := decodeSpec()
	return func() ([]byte, error) {
		return data, err
	}
}

// Constructs a synthetic filesystem for resolving external references when loading openapi specifications.
func PathToRawSpec(pathToFile string) map[string]func() ([]byte, error) {
	res := make(map[string]func() ([]byte, error))
	if len(pathToFile) > 0 {
		res[pathToFile] = rawSpec
	}

	return res
}

// GetSwagger returns the Swagger specification corresponding to the generated code
// in this file. The external references of Swagger specification are resolved.
// The logic of resolving external references is tightly connected to "import-mapping" feature.
// Externally referenced files must be embedded in the corresponding golang packages.
// Urls can be supported but this task was out of the scope.
func GetSwagger() (swagger *openapi3.T, err error) {
	resolvePath := PathToRawSpec("")

	loader := openapi3.NewLoader()
	loader.IsExternalRefsAllowed = true
	loader.ReadFromURIFunc = func(loader *openapi3.Loader, url *url.URL) ([]byte, error) {
		pathToFile := url.String()
		pathToFile = path.Clean(pathToFile)
		getSpec, ok := resolvePath[pathToFile]
		if !ok {
			err1 := fmt.Errorf("path not found: %s", pathToFile)
			return nil, err1
		}
		return getSpec()
	}
	var specData []byte
	specData, err = rawSpec()
	if err != nil {
		return
	}
	swagger, err = loader.LoadFromData(specData)
	if err != nil {
		return
	}
	return
}
