// Package api provides primitives to interact with the openapi HTTP API.
//
// Code generated by github.com/oapi-codegen/oapi-codegen/v2 version v2.5.1 DO NOT EDIT.
package api

import (
	"bytes"
	"compress/gzip"
	"encoding/base64"
	"fmt"
	"net/url"
	"path"
	"strings"

	"github.com/getkin/kin-openapi/openapi3"
)

// Base64 encoded, gzipped, json marshaled Swagger object
var swaggerSpec = []string{

	"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",
}

// GetSwagger returns the content of the embedded swagger specification file
// or error if failed to decode
func decodeSpec() ([]byte, error) {
	zipped, err := base64.StdEncoding.DecodeString(strings.Join(swaggerSpec, ""))
	if err != nil {
		return nil, fmt.Errorf("error base64 decoding spec: %w", err)
	}
	zr, err := gzip.NewReader(bytes.NewReader(zipped))
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}
	var buf bytes.Buffer
	_, err = buf.ReadFrom(zr)
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}

	return buf.Bytes(), nil
}

var rawSpec = decodeSpecCached()

// a naive cached of a decoded swagger spec
func decodeSpecCached() func() ([]byte, error) {
	data, err := decodeSpec()
	return func() ([]byte, error) {
		return data, err
	}
}

// Constructs a synthetic filesystem for resolving external references when loading openapi specifications.
func PathToRawSpec(pathToFile string) map[string]func() ([]byte, error) {
	res := make(map[string]func() ([]byte, error))
	if len(pathToFile) > 0 {
		res[pathToFile] = rawSpec
	}

	return res
}

// GetSwagger returns the Swagger specification corresponding to the generated code
// in this file. The external references of Swagger specification are resolved.
// The logic of resolving external references is tightly connected to "import-mapping" feature.
// Externally referenced files must be embedded in the corresponding golang packages.
// Urls can be supported but this task was out of the scope.
func GetSwagger() (swagger *openapi3.T, err error) {
	resolvePath := PathToRawSpec("")

	loader := openapi3.NewLoader()
	loader.IsExternalRefsAllowed = true
	loader.ReadFromURIFunc = func(loader *openapi3.Loader, url *url.URL) ([]byte, error) {
		pathToFile := url.String()
		pathToFile = path.Clean(pathToFile)
		getSpec, ok := resolvePath[pathToFile]
		if !ok {
			err1 := fmt.Errorf("path not found: %s", pathToFile)
			return nil, err1
		}
		return getSpec()
	}
	var specData []byte
	specData, err = rawSpec()
	if err != nil {
		return
	}
	swagger, err = loader.LoadFromData(specData)
	if err != nil {
		return
	}
	return
}
