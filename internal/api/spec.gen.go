// Package api provides primitives to interact with the openapi HTTP API.
//
// Code generated by github.com/oapi-codegen/oapi-codegen/v2 version v2.5.1 DO NOT EDIT.
package api

import (
	"bytes"
	"compress/gzip"
	"encoding/base64"
	"fmt"
	"net/url"
	"path"
	"strings"

	"github.com/getkin/kin-openapi/openapi3"
)

// Base64 encoded, gzipped, json marshaled Swagger object
var swaggerSpec = []string{

	"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",
	"NeVBsNDo4Pbd1d3/AgAA//+A5zWihDcAAA==",
}

// GetSwagger returns the content of the embedded swagger specification file
// or error if failed to decode
func decodeSpec() ([]byte, error) {
	zipped, err := base64.StdEncoding.DecodeString(strings.Join(swaggerSpec, ""))
	if err != nil {
		return nil, fmt.Errorf("error base64 decoding spec: %w", err)
	}
	zr, err := gzip.NewReader(bytes.NewReader(zipped))
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}
	var buf bytes.Buffer
	_, err = buf.ReadFrom(zr)
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}

	return buf.Bytes(), nil
}

var rawSpec = decodeSpecCached()

// a naive cached of a decoded swagger spec
func decodeSpecCached() func() ([]byte, error) {
	data, err := decodeSpec()
	return func() ([]byte, error) {
		return data, err
	}
}

// Constructs a synthetic filesystem for resolving external references when loading openapi specifications.
func PathToRawSpec(pathToFile string) map[string]func() ([]byte, error) {
	res := make(map[string]func() ([]byte, error))
	if len(pathToFile) > 0 {
		res[pathToFile] = rawSpec
	}

	return res
}

// GetSwagger returns the Swagger specification corresponding to the generated code
// in this file. The external references of Swagger specification are resolved.
// The logic of resolving external references is tightly connected to "import-mapping" feature.
// Externally referenced files must be embedded in the corresponding golang packages.
// Urls can be supported but this task was out of the scope.
func GetSwagger() (swagger *openapi3.T, err error) {
	resolvePath := PathToRawSpec("")

	loader := openapi3.NewLoader()
	loader.IsExternalRefsAllowed = true
	loader.ReadFromURIFunc = func(loader *openapi3.Loader, url *url.URL) ([]byte, error) {
		pathToFile := url.String()
		pathToFile = path.Clean(pathToFile)
		getSpec, ok := resolvePath[pathToFile]
		if !ok {
			err1 := fmt.Errorf("path not found: %s", pathToFile)
			return nil, err1
		}
		return getSpec()
	}
	var specData []byte
	specData, err = rawSpec()
	if err != nil {
		return
	}
	swagger, err = loader.LoadFromData(specData)
	if err != nil {
		return
	}
	return
}
